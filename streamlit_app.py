import streamlit as st
import base64

# --- 페이지 기본 설정 ---
st.set_page_config(
    page_title="한국 뮤지컬 대백과",
    page_icon="🎭",
    layout="wide"
)

# --- 세련된 배경과 커스텀 스타일 적용 ---
st.markdown("""
<style>
/* Streamlit 앱의 메인 배경 */
.stApp {
    background-image: linear-gradient(135deg, #1a2a6c, #000000);
    background-attachment: fixed;
    background-size: cover;
    color: #e0e0e0; /* 기본 텍스트 색상을 밝게 */
}

/* 헤더와 제목 색상 */
h1, h2, h3 {
    color: #ffffff;
}

/* 검색창 스타일 */
.stTextInput > div > div > input {
    background-color: #000000; /* 배경을 검은색으로 변경 */
    color: #FFFFFF; /* 텍스트 색상을 흰색으로 변경 */
    border: 1px solid #C0A062; /* 골드 테두리 추가 */
    border-radius: 20px;
    text-align: center; /* 검색창 텍스트 가운데 정렬 */
}

/* 확장(expander) 컴포넌트 스타일 */
.stExpander {
    background-color: rgba(255, 255, 255, 0.05);
    border-radius: 10px;
    text-align: center; /* 확장 내부 텍스트 가운데 정렬 */
}
.stExpander header {
    color: #D4AF37 !important; /* 확장 헤더 텍스트 골드 */
}

/* 구분선 색상 */
hr {
    background-color: #444444;
}

/* 검색 결과 알림창 스타일 */
div[data-baseweb="alert"] {
    background-color: #000000 !important; /* 검은색 배경 */
    color: #FFFFFF !important; /* 흰색 텍스트 */
    border: 1px solid #C0A062 !important; /* 골드 테두리 추가 */
    border-radius: 10px;
    text-align: center; /* 알림창 텍스트 가운데 정렬 */
}

/* 모든 p 태그(줄거리, 배우 목록 등) 색상 고정 */
p {
    color: #D4AF37;
}

strong {
    color: #D4AF37;
}

</style>
""", unsafe_allow_html=True)


# --- 뮤지컬 데이터 (60개) ---
musicals_data = [
    {
        "title": "프랑켄슈타인",
        "background_css": "linear-gradient(135deg, #2c3e50, #4a5a6a, #000000)",
        "summary": "19세기 유럽, 천재 과학자 빅터 프랑켄슈타인이 생명 창조에 성공하지만, 그가 만든 피조물에게 '괴물'이라는 이름으로 버림받으며 비극이 시작됩니다.",
        "cast": {
            "빅터 프랑켄슈타인": ["류정한", "유준상", "전동석", "민우혁", "규현"],
            "앙리 뒤프레/괴물": ["박은태", "한지상", "카이", "박민성", "정택운(레오)"],
            "엘렌": ["서지영", "박혜나", "안시하"],
            "줄리아": ["안시하", "이지혜", "박혜나"]
        }
    },
    {
        "title": "지킬앤하이드",
        "background_css": "linear-gradient(135deg, #4d0000, #1a0000, #000000)",
        "summary": "인간의 내면에 공존하는 선과 악을 분리하려는 의사 '지킬'이 실험을 통해 자신의 또 다른 인격인 '하이드'를 만들어내면서 벌어지는 비극적 스릴러입니다.",
        "cast": {
            "지킬/하이드": ["조승우", "류정한", "홍광호", "박은태", "전동석", "신성록", "박건형", "민우혁"],
            "루시": ["김선영", "옥주현", "아이비", "윤공주", "린아", "해나", "선민"],
            "엠마": ["조정은", "김소현", "임혜영", "이지혜", "최수진", "민경아"]
        }
    },
    {
        "title": "오페라의 유령",
        "background_css": "linear-gradient(135deg, #000033, #1a0000, #000000)",
        "summary": "파리 오페라 하우스 지하에 숨어 사는 천재 음악가 '유령'과 프리마돈나 '크리스틴', 그리고 귀족 '라울'의 비극적이고 아름다운 사랑 이야기입니다.",
        "cast": {
            "유령(팬텀)": ["윤영석", "홍광호", "박효신", "조승우", "최재림", "전동석"],
            "크리스틴": ["김소현", "이혜경", "임혜영", "손지수", "송은혜"],
            "라울": ["류정한", "정상윤", "송원근", "황건하"]
        }
    },
    {
        "title": "레미제라블",
        "background_css": "linear-gradient(135deg, #001f4d, #3d0000, #2a2a2a)",
        "summary": "빵 한 조각을 훔친 죄로 19년간 감옥살이를 한 장발장의 기구한 인생을 통해 인간의 존엄성과 사랑, 용서를 다룬 빅토르 위고 원작의 대서사시입니다.",
        "cast": {
            "장발장": ["정성화", "양준모", "민우혁", "최재림"],
            "자베르": ["문종원", "김우형", "카이", "김준현"],
            "판틴": ["조정은", "차지연", "린아"]
        }
    },
    {
        "title": "데스노트",
        "background_css": "linear-gradient(135deg, #330000, #1a1a1a, #4a0000)",
        "summary": "이름이 적히면 죽는 '데스노트'를 손에 넣은 천재 고등학생 라이토와 명탐정 엘(L)의 치열한 두뇌 싸움을 그린, 동명 만화 원작의 뮤지컬입니다.",
        "cast": {
            "야가미 라이토": ["홍광호", "고은성", "김성철"],
            "엘(L)": ["김준수", "김성철", "서경수"],
            "렘": ["박혜나", "김선영", "장은아"],
            "류크": ["강홍석", "서경수", "장지후"]
        }
    },
    {
        "title": "드라큘라",
        "background_css": "linear-gradient(135deg, #6b0000, #000000)",
        "summary": "수백 년 동안 한 여인만을 사랑해 온 드라큘라 백작의 이야기를 다룹니다. 거부할 수 없는 매력의 뱀파이어와 그를 둘러싼 인물들의 운명적인 사랑과 갈등을 그립니다.",
        "cast": {
            "드라큘라": ["김준수", "전동석", "신성록", "류정한"],
            "미나": ["조정은", "임혜영", "린아", "아이비", "박지연"],
            "반 헬싱": ["강태을", "손준호", "유준상"]
        }
    },
    {
        "title": "레베카",
        "background_css": "linear-gradient(135deg, #00264d, #333333)",
        "summary": "죽은 전 부인 '레베카'의 그림자가 드리운 맨덜리 저택에 새로 들어온 '나(I)'가 집사 '댄버스 부인'과 맞서며 사랑과 자아를 찾아가는 미스터리 스릴러입니다.",
        "cast": {
            "막심 드 윈터": ["류정한", "민영기", "엄기준", "송창의", "카이", "신성록"],
            "댄버스 부인": ["옥주현", "신영숙", "차지연", "장은아", "리사"],
            "나(I)": ["임혜영", "김보경", "송상은", "루나", "이지혜", "박지연"]
        }
    },
    {
        "title": "엘리자벳",
        "background_css": "linear-gradient(135deg, #2a2a2a, #5c5c8a, #000000)",
        "summary": "오스트리아 황후 '엘리자벳'의 일대기에 '죽음(Der Tod)'이라는 판타지적 요소를 더해, 자유를 갈망했던 그녀의 삶을 드라마틱하게 그린 작품입니다.",
        "cast": {
            "엘리자벳": ["옥주현", "김소현", "신영숙", "이지혜", "김선영"],
            "죽음(토드)": ["김준수", "박효신", "전동석", "박형식", "정택운(레오)", "신성록"],
            "루케니": ["박은태", "이지훈", "강태을", "김수용"]
        }
    },
    {
        "title": "위키드",
        "background_css": "linear-gradient(135deg, #00552e, #000000)",
        "summary": "도로시가 오즈에 오기 전, 초록 마녀 엘파바와 금발 마녀 글린다의 숨겨진 우정과 성장을 통해 선과 악의 편견을 깨는 감동적인 이야기입니다.",
        "cast": {
            "엘파바": ["옥주현", "박혜나", "차지연", "손승연"],
            "글린다": ["정선아", "김보경", "아이비", "나하나"],
            "피에로": ["민우혁", "고은성", "서경수", "진태화"]
        }
    },
    {
        "title": "헤드윅",
        "background_css": "linear-gradient(135deg, #ff0066, #330066, #000000)",
        "summary": "동독 출신의 트랜스젠더 록 가수 '헤드윅'이 자신의 실패한 사랑과 음악 인생에 대한 이야기를 콘서트 형식으로 풀어내는 모노드라마 뮤지컬입니다.",
        "cast": {
            "헤드윅": ["조승우", "오만석", "조정석", "유연석", "전동석", "마이클리", "정문성", "이규형", "렌"],
            "이츠학": ["전혜선", "이영미", "제이민", "유리아", "홍서영"]
        }
    },
    {
        "title": "영웅",
        "background_css": "linear-gradient(135deg, #4a4a4a, #1a1a1a)",
        "summary": "1909년, 하얼빈역에서 이토 히로부미를 저격한 안중근 의사의 마지막 1년을 그린 대한민국 대표 창작 뮤지컬입니다.",
        "cast": {
            "안중근": ["정성화", "양준모", "민우혁", "류정한", "신성록"],
            "이토 히로부미": ["김도형", "서영주", "이정열"],
            "설희": ["정재은", "린지", "리사"]
        }
    },
    {
        "title": "웃는 남자",
        "background_css": "linear-gradient(135deg, #b30000, #2a002a, #000000)",
        "summary": "17세기 영국, 찢어진 입을 가진 기형적인 외모의 '그윈플렌'이 유랑극단에서 광대로 살아가며 겪는 사랑과 사회 부조리에 대한 이야기입니다.",
        "cast": {
            "그윈플렌": ["박효신", "박강현", "수호", "박은태", "규현"],
            "우르수스": ["정성화", "양준모", "민영기"],
            "데아": ["민경아", "이수빈", "양서윤"],
            "조시아나 여공작": ["신영숙", "옥주현", "김소향"]
        }
    },
    {
        "title": "노트르담 드 파리",
        "background_css": "linear-gradient(135deg, #4a2a00, #1a1a1a)",
        "summary": "15세기 파리, 추악한 외모의 꼽추 종지기 '콰지모도'와 아름다운 집시 여인 '에스메랄다', 그리고 그녀를 둘러싼 세 남자의 비극적인 사랑과 숙명을 그린 작품입니다.",
        "cast": {
            "콰지모도": ["윤형렬", "홍광호", "케이윌", "정성화", "마이클리"],
            "에스메랄다": ["바다", "윤공주", "차지연", "전나영", "유리아"],
            "그랭구와르": ["박은태", "마이클리", "정동하", "이충주", "조휘"]
        }
    },
    {
        "title": "모차르트!",
        "background_css": "linear-gradient(135deg, #cc0000, #333333)",
        "summary": "천재 음악가 모차르트의 삶을 그리고 있지만, 그의 천재성을 상징하는 아이 '아마데'와의 갈등을 통해 자유를 갈망했던 인간 '볼프강'의 고뇌를 조명합니다.",
        "cast": {
            "볼프강 모차르트": ["박효신", "김준수", "박은태", "전동석", "규현", "수호", "김희재"],
            "콜로레도 대주교": ["민영기", "김준현", "손준호"],
            "콘스탄체 베버": ["정선아", "차지연", "김소향", "린아"]
        }
    },
    {
        "title": "시카고",
        "background_css": "linear-gradient(135deg, #990000, #1a1a1a, #000000)",
        "summary": "1920년대 재즈 시대의 시카고, 살인을 저지르고도 스타가 되길 꿈꾸는 '록시 하트'와 '벨마 켈리'의 이야기를 통해 당시 사회의 부조리와 허영을 풍자합니다.",
        "cast": {
            "벨마 켈리": ["최정원", "윤공주", "박칼린"],
            "록시 하트": ["아이비", "티파니 영", "민경아", "옥주현"],
            "빌리 플린": ["박건형", "최재림", "남경주"]
        }
    },
    {
        "title": "맘마미아!",
        "background_css": "linear-gradient(135deg, #0066cc, #0099ff, #66ccff)",
        "summary": "그리스의 작은 섬에서 엄마 '도나'와 사는 딸 '소피'가 자신의 결혼식을 앞두고 아빠일 가능성이 있는 세 남자를 초대하며 벌어지는 유쾌한 소동을 그립니다.",
        "cast": {
            "도나": ["최정원", "신영숙", "김선영"],
            "소피": ["박지연", "서현", "루나", "김금나"],
            "타냐": ["전수경", "김영주", "홍지민"]
        }
    },
    {
        "title": "킹키부츠",
        "background_css": "linear-gradient(135deg, #cc0000, #ff3333, #ff6666)",
        "summary": "폐업 위기에 처한 구두 공장을 물려받은 '찰리'가 드랙퀸 '롤라'를 만나 여장 남자를 위한 부츠 '킹키부츠'를 만들면서 벌어지는 신나는 이야기입니다.",
        "cast": {
            "롤라": ["정성화", "강홍석", "최재림", "박은태"],
            "찰리": ["이석훈", "김호영", "성규", "신재범"],
            "로렌": ["김지우", "김환희", "나하나"]
        }
    },
    {
        "title": "그날들",
        "background_css": "linear-gradient(135deg, #333333, #666666)",
        "summary": "故 김광석의 노래들로 이루어진 주크박스 뮤지컬. 청와대 경호실을 배경으로 20년 전 사라진 '그녀'와 경호원의 미스터리한 사건을 그립니다.",
        "cast": {
            "정학": ["유준상", "이건명", "최재웅", "오만석", "엄기준", "지창욱"],
            "무영": ["지창욱", "오종혁", "온주완", "양요섭", "규현", "남우현", "윤두준"],
            "그녀": ["김지현", "신다은", "루나", "방민아", "효정"]
        }
    },
    {
        "title": "서편제",
        "background_css": "linear-gradient(135deg, #8c6a4a, #d9b38c)",
        "summary": "이청준의 동명 소설을 원작으로, 소리꾼 아버지 '유봉'과 그의 딸 '송화', 아들 '동호'의 한과 예술혼이 담긴 삶을 한국적인 정서와 음악으로 풀어낸 작품입니다.",
        "cast": {
            "송화": ["차지연", "이자람", "장은아", "이소연"],
            "동호": ["박영수", "김재범", "서범석"],
            "유봉": ["이정열", "서범석", "양준모"]
        }
    },
    {
        "title": "팬텀",
        "background_css": "linear-gradient(135deg, #a0a0a0, #333333, #000000)",
        "summary": "'오페라의 유령' 에릭의 인간적인 면모에 초점을 맞춰, 그의 비극적인 과거와 천재성, 그리고 크리스틴을 향한 순수한 사랑을 깊이 있게 다룬 작품입니다.",
        "cast": {
            "팬텀(에릭)": ["박효신", "박은태", "전동석", "카이", "규현", "류정한"],
            "크리스틴 다에": ["임선혜", "김소현", "이지혜", "김수"],
            "필립 드 샹동 백작": ["손준호", "박송권", "이해준"]
        }
    },
    {
        "title": "베르테르",
        "background_css": "linear-gradient(135deg, #ffcc00, #663300)",
        "summary": "괴테의 소설 '젊은 베르테르의 슬픔'을 원작으로, '롯데'를 향한 '베르테르'의 순수하고도 열정적인 사랑과 그로 인한 깊은 고뇌를 서정적인 음악으로 풀어냅니다.",
        "cast": {
            "베르테르": ["조승우", "엄기준", "규현", "카이", "유연석", "나현우"],
            "롯데": ["이지혜", "김예원", "이지수"],
            "알베르트": ["이상현", "박은석", "김성철"]
        }
    },
    {
        "title": "스위니토드",
        "background_css": "linear-gradient(135deg, #660000, #1a1a1a)",
        "summary": "19세기 런던, 억울한 옥살이를 하고 돌아온 이발사 '벤자민 바커'가 '스위니 토드'로 이름을 바꾸고, 자신을 불행에 빠뜨린 자들에게 잔혹한 복수를 하는 이야기입니다.",
        "cast": {
            "스위니 토드": ["조승우", "류정한", "홍광호", "박은태", "강필석", "신성록"],
            "러빗 부인": ["옥주현", "전미도", "김지현", "린아", "이지혜"],
            "터핀 판사": ["김도형", "서영주", "박인배"]
        }
    },
    {
        "title": "팬레터",
        "background_css": "linear-gradient(135deg, #4a3a2a, #f0e6d6)",
        "summary": "1930년대 경성을 배경으로, 천재 소설가 '김해진'과 그를 동경하는 작가 지망생 '정세훈', 그리고 비밀에 싸인 천재 여류작가 '히카루'의 이야기를 다룬 미스터리 드라마입니다.",
        "cast": {
            "정세훈": ["문성일", "김성철", "려욱", "윤소호"],
            "김해진": ["김종구", "이규형", "김경수"],
            "히카루": ["소정화", "김히어라", "조지승"]
        }
    },
    {
        "title": "벤허",
        "background_css": "linear-gradient(135deg, #bf8f30, #4a2a00)",
        "summary": "귀족 가문의 자제였던 '유다 벤허'가 친구의 배신으로 노예로 전락한 후, 역경을 딛고 복수에 나서는 과정을 그린 장대한 스케일의 창작 뮤지컬입니다.",
        "cast": {
            "유다 벤허": ["유준상", "박은태", "카이", "신성록", "규현"],
            "메셀라": ["박민성", "이지훈", "서경수"],
            "에스더": ["윤공주", "아이비", "선민"]
        }
    },
    {
        "title": "빨래",
        "background_css": "linear-gradient(135deg, #66ccff, #ffffff)",
        "summary": "서울의 한 달동네를 배경으로, 서점에서 일하는 '나영'과 몽골 출신 이주노동자 '솔롱고'를 비롯한 서민들의 팍팍하지만 따뜻한 삶의 이야기를 그립니다.",
        "cast": {
            "서나영": ["홍지희", "강연정", "김주연"],
            "솔롱고": ["홍광호", "임창정", "이정은"],
            "주인 할매": ["이정은", "이미경"]
        }
    },
    {
        "title": "마리 퀴리",
        "background_css": "linear-gradient(135deg, #003333, #006666, #ccffff)",
        "summary": "최초로 노벨상을 두 번 수상한 위대한 과학자 '마리 퀴리'의 삶을 다룹니다. 자신의 연구가 초래한 비극에 맞서며 진실을 찾아가는 그녀의 고뇌와 신념을 그립니다.",
        "cast": {
            "마리 퀴리": ["김소향", "옥주현", "리사"],
            "안느": ["김히어라", "이봄소리", "효정"],
            "피에르 퀴리": ["김찬호", "박영수", "임별"]
        }
    },
    {
        "title": "어쩌면 해피엔딩",
        "background_css": "linear-gradient(135deg, #ff9966, #ffcc99)",
        "summary": "가까운 미래, 인간을 돕기 위해 만들어졌지만 구형이 되어 버려진 로봇 '올리버'와 '클레어'가 만나 사랑과 삶의 의미를 배워가는 따뜻하고 서정적인 이야기입니다.",
        "cast": {
            "올리버": ["정문성", "전성우", "신성민", "임준혁"],
            "클레어": ["전미도", "박지연", "강혜인", "한재아"]
        }
    },
    {
        "title": "호프",
        "background_css": "linear-gradient(135deg, #663300, #996633)",
        "summary": "현대 문학의 거장 요제프 클라인의 미발표 원고를 평생 지켜온 78세 노인 '에바 호프'의 삶을 통해, 원고가 곧 자신이었던 한 인간의 인생을 그립니다.",
        "cast": {
            "호프": ["김선영", "차지연", "김지현"],
            "K": ["고훈정", "조형균", "김경수"]
        }
    },
    {
        "title": "광화문 연가",
        "background_css": "linear-gradient(135deg, #333399, #6666cc)",
        "summary": "죽음을 앞둔 주인공 '명우'가 마지막 1분을 앞두고 '월하'와 함께 떠나는 시간 여행을 통해 자신의 젊은 날의 사랑과 우정을 되돌아보는 이야기입니다.",
        "cast": {
            "중년 명우": ["안재욱", "이건명", "강필석", "윤도현", "차지연"],
            "월하": ["구원영", "김호영", "이석훈", "정성화", "차지연"],
            "젊은 명우": ["허도영", "김성규", "박강현", "이찬동"]
        }
    },
    {
        "title": "사의 찬미",
        "background_css": "linear-gradient(135deg, #003366, #336699, #99aabb)",
        "summary": "1920년대 경성, 천재 극작가 김우진과 조선 최초의 소프라노 윤심덕의 비극적인 사랑과 실화를 바탕으로 한 뮤지컬입니다.",
        "cast": {
            "김우진": ["이해준", "김종구", "진태화"],
            "윤심덕": ["이지수", "최연우", "최수진"],
            "사내": ["최재웅", "김재범", "박정표"]
        }
    },
    # --- 30개 뮤지컬 추가 ---
    {
        "title": "하데스타운",
        "background_css": "linear-gradient(135deg, #a67c00, #3d2b00, #000000)",
        "summary": "그리스 신화 속 오르페우스와 에우리디케의 이야기를 현대적으로 재해석한 작품으로, 사랑과 희망, 의심에 대한 강렬한 메시지를 담고 있습니다.",
        "cast": {
            "오르페우스": ["조형균", "박강현", "시우민"],
            "에우리디케": ["김선영", "박혜나", "김환희"],
            "하데스": ["김우형", "지현준", "양준모"],
            "페르세포네": ["최정원", "김선영", "박혜나"]
        }
    },
    {
        "title": "그레이트 코멧",
        "background_css": "linear-gradient(135deg, #800000, #d4af37, #000000)",
        "summary": "톨스토이의 '전쟁과 평화' 일부를 기반으로 한 팝 오페라 뮤지컬로, 19세기 러시아 귀족 사회의 사랑과 욕망을 혁신적인 음악과 연출로 그려냅니다.",
        "cast": {
            "피에르": ["홍광호", "케이윌"],
            "나타샤": ["정은지", "이해나", "유연정"],
            "아나톨": ["이충주", "고은성", "박강현"]
        }
    },
    {
        "title": "비틀쥬스",
        "background_css": "linear-gradient(135deg, #550a77, #00ff00, #000000)",
        "summary": "유령이 된 부부가 자신들의 집에서 새 가족을 쫓아내기 위해 유령 '비틀쥬스'를 부르면서 벌어지는 기상천외하고 유쾌한 소동을 그린 뮤지컬입니다.",
        "cast": {
            "비틀쥬스": ["유준상", "정성화"],
            "리디아": ["홍나현", "장민제"],
            "아담": ["이율", "이창용"],
            "바바라": ["김지우", "유리아"]
        }
    },
    {
        "title": "식스 더 뮤지컬",
        "background_css": "linear-gradient(135deg, #7b2cbf, #d000ff, #ff00a6)",
        "summary": "헨리 8세의 여섯 아내들이 팝 아이돌 그룹을 결성해 각자의 삶과 사랑, 고난을 노래하는 콘서트 형식의 독특하고 에너지 넘치는 뮤지컬입니다.",
        "cast": {
            "아라곤": ["이아름솔", "손승연"],
            "불린": ["김지우", "배수정"],
            "시모어": ["박혜나", "박가람"],
            "클레페": ["김려원", "솔지"],
            "하워드": ["김지선", "최현선"],
            "파": ["유주혜", "홍서영"]
        }
    },
    {
        "title": "컴 프롬 어웨이",
        "background_css": "linear-gradient(135deg, #0033a0, #f2a800, #ffffff)",
        "summary": "9/11 테러 당시, 캐나다의 작은 마을 갠더에 불시착한 38대의 비행기 승객들과 마을 사람들이 함께한 5일간의 기적 같은 실화를 바탕으로 한 작품입니다.",
        "cast": {
            "베벌리 외": ["차지연", "남경주", "최정원"],
            "클로드 외": ["서현철", "고창석"],
            "보니 외": ["정영주", "신영숙"]
        }
    },
    {
        "title": "마틸다",
        "background_css": "linear-gradient(135deg, #005f73, #0a9396, #94d2bd)",
        "summary": "책 읽기를 좋아하는 천재 소녀 마틸다가 부모와 교장의 부당함에 맞서 자신의 행복을 찾아가는 과정을 유쾌하고 감동적으로 그린 뮤지컬입니다.",
        "cast": {
            "마틸다": ["안소명", "이지나", "황예영", "설가은"],
            "트런치불": ["최재림", "장지후"],
            "미스 허니": ["방진의", "박혜미"]
        }
    },
    {
        "title": "맨 오브 라만차",
        "background_css": "linear-gradient(135deg, #8B4513, #CD853F, #F4A460)",
        "summary": "자신을 돈키호테라고 믿는 노인 '세르반테스'의 이야기를 통해, 현실의 벽에 부딪히더라도 꿈을 향해 나아가는 용기와 희망을 노래합니다.",
        "cast": {
            "세르반테스/돈키호테": ["조승우", "류정한", "홍광호", "정성화"],
            "알돈자": ["조정은", "린아", "김지우"],
            "산초": ["이훈진", "정상훈", "김호영"]
        }
    },
    {
        "title": "엑스칼리버",
        "background_css": "linear-gradient(135deg, #002b5c, #1e4a8a, #8a9a5b)",
        "summary": "왕의 운명을 타고난 청년 '아더'가 성검 엑스칼리버를 뽑고 혼란스러운 고대 영국을 지켜내는 영웅으로 성장해가는 과정을 그린 대작입니다.",
        "cast": {
            "아더": ["카이", "김준수", "서은광", "도겸", "김성규"],
            "랜슬럿": ["이지훈", "에녹", "강태을"],
            "모르가나": ["신영숙", "장은아", "옥주현"],
            "기네비어": ["김소향", "케이", "민경아"]
        }
    },
    {
        "title": "캣츠",
        "background_css": "linear-gradient(135deg, #ffc300, #ff5733, #c70039, #900c3f, #581845)",
        "summary": "1년에 한 번 열리는 '젤리클 축제'에 모인 고양이들이 새로운 삶을 얻을 단 한 마리의 고양이로 선택받기 위해 각자의 이야기를 노래하는 내용입니다.",
        "cast": {
            "그리자벨라": ["옥주현", "박혜나", "인순이", "차지연"],
            "럼 텀 터거": ["빅스 켄", "이장우", "김준현"],
            "멍커스트랩": ["이시언", "이창희", "유회웅"]
        }
    },
    {
        "title": "아이다",
        "background_css": "linear-gradient(135deg, #f7b733, #fc4a1a)",
        "summary": "고대 이집트를 배경으로, 적국인 누비아의 공주 '아이다'와 이집트 장군 '라다메스', 그리고 이집트 공주 '암네리스'의 엇갈린 사랑과 운명을 다룹니다.",
        "cast": {
            "아이다": ["옥주현", "차지연", "윤공주", "전나영"],
            "라다메스": ["김우형", "민우혁", "최재림"],
            "암네리스": ["정선아", "아이비", "김수하"]
        }
    },
    {
        "title": "빌리 엘리어트",
        "background_css": "linear-gradient(135deg, #00c6ff, #0072ff)",
        "summary": "1980년대 영국, 파업 중인 탄광촌을 배경으로, 권투보다 발레를 사랑한 소년 '빌리'가 꿈을 향해 나아가는 감동적인 성장 이야기입니다.",
        "cast": {
            "빌리": ["김현준", "성지환", "심현서", "천우진", "이우진", "주현준"],
            "아빠": ["김갑수", "최명경", "조정근"]
        }
    },
    {
        "title": "스토리 오브 마이 라이프",
        "background_css": "linear-gradient(135deg, #f0f2f0, #000c40)",
        "summary": "베스트셀러 작가 '토마스'가 어린 시절 가장 친한 친구였던 '앨빈'의 갑작스러운 죽음을 계기로, 그와 함께했던 추억을 되짚으며 잊고 있던 영감을 되찾는 2인극입니다.",
        "cast": {
            "토마스 위버": ["이석준", "고영빈", "강필석", "김종구", "조성윤"],
            "앨빈 켈비": ["이창용", "정동화", "김재범", "정원영"]
        }
    },
    {
        "title": "마리 앙투아네트",
        "background_css": "linear-gradient(135deg, #f8cdda, #1d2b64)",
        "summary": "18세기 프랑스 혁명을 배경으로, 왕비 '마리 앙투아네트'와 사회의 부조리에 맞서는 '마그리드 아르노'의 엇갈린 운명을 그린 작품입니다.",
        "cast": {
            "마리 앙투아네트": ["김소현", "김소향"],
            "마그리드 아르노": ["김연지", "정유지"],
            "악셀 폰 페르젠": ["민우혁", "이석훈", "이창섭", "도영"]
        }
    },
    {
        "title": "젠틀맨스 가이드",
        "background_css": "linear-gradient(135deg, #a43a3a, #1e1e1e)",
        "summary": "가난하게 살던 '몬티 나바로'가 자신이 다이스퀴스 가문의 여덟 번째 후계자라는 사실을 알게 된 후, 백작이 되기 위해 자신보다 서열이 높은 여덟 명의 후계자들을 제거하는 과정을 그린 코미디 뮤지컬입니다.",
        "cast": {
            "다이스퀴스": ["오만석", "박은태", "이규형", "서경수", "유연석"],
            "몬티 나바로": ["김동완", "박은석", "이상이", "유연석"]
        }
    },
    {
        "title": "시라노",
        "background_css": "linear-gradient(135deg, #2c3e50, #fd746c)",
        "summary": "크고 못생긴 코에 대한 콤플렉스 때문에 사랑하는 '록산'에게 고백하지 못하는 '시라노'가, 잘생겼지만 말주변이 없는 '크리스티앙'을 대신해 사랑의 편지를 쓰면서 벌어지는 이야기입니다.",
        "cast": {
            "시라노": ["류정한", "홍광호", "김동완", "조형균", "최재웅"],
            "록산": ["박지연", "나하나", "최수진"],
            "크리스티앙": ["송원근", "김용준", "박진우"]
        }
    },
    {
        "title": "리지",
        "background_css": "linear-gradient(135deg, #373737, #a01c1c)",
        "summary": "1892년 미국에서 일어난 '리지 보든 사건'을 모티브로 한 록 뮤지컬. 억압적인 집안에서 자란 '리지'와 주변 인물들의 이야기를 강렬한 음악으로 풀어냅니다.",
        "cast": {
            "리지": ["전성민", "유리아", "이소정"],
            "엠마": ["김려원", "여은", "제이민"],
            "앨리스": ["이지수", "김수연"],
            "브리짓": ["이영미", "최수진"]
        }
    },
    {
        "title": "잃어버린 얼굴 1895",
        "background_css": "linear-gradient(135deg, #232526, #414345)",
        "summary": "명성황후 시해 사건 이후, 그녀의 사진이 한 장도 남아있지 않다는 역사적 사실에 상상력을 더해, 사진 찍기를 거부했던 명성황후의 이야기를 그린 창작 뮤지컬입니다.",
        "cast": {
            "명성황후": ["차지연", "김선영"],
            "고종": ["박영수", "정동화"],
            "휘": ["신성록", "김재범"]
        }
    },
    {
        "title": "광염 소나타",
        "background_css": "linear-gradient(135deg, #1f1c18, #8e0e00)",
        "summary": "우연히 얻게 된 죽음의 영감으로 광기 어린 걸작을 써 내려가는 천재 작곡가 'J'와 그를 파멸로 이끄는 'S', 그리고 그를 지키려는 친구 'K'의 이야기입니다.",
        "cast": {
            "J": ["려욱", "후이", "김지철", "문태유"],
            "S": ["김종구", "이선근", "박준휘"],
            "K": ["김경수", "유승현", "이현재"]
        }
    },
    {
        "title": "더데빌",
        "background_css": "linear-gradient(135deg, #000000, #434343)",
        "summary": "괴테의 '파우스트'를 현대적으로 재해석한 록 뮤지컬. 유혹에 넘어가는 인간 '존 파우스트'와 그를 둘러싼 빛과 어둠의 존재 'X-White'와 'X-Black'의 대립을 그립니다.",
        "cast": {
            "X-White": ["차지연", "박혜나", "이충주", "고훈정"],
            "X-Black": ["박영수", "임병근", "이석준", "김재범"],
            "존 파우스트": ["송원근", "정욱진", "조형균"]
        }
    },
    {
        "title": "쓰릴 미",
        "background_css": "linear-gradient(135deg, #2c3e50, #000000)",
        "summary": "1924년 시카고에서 일어난 충격적인 살인 사건을 바탕으로 한 2인극. '나'와 '그'의 비정상적이고 위험한 관계를 밀도 있게 그려냅니다.",
        "cast": {
            "나": ["정동화", "이해준", "김현진", "정욱진"],
            "그": ["이규형", "김우석", "노윤", "이종석"]
        }
    },
    {
        "title": "빈센트 반 고흐",
        "background_css": "linear-gradient(135deg, #002080, #ffc700)",
        "summary": "천재 화가 '빈센트 반 고흐'와 그의 동생 '테오 반 고흐'가 주고받은 편지를 바탕으로, 그의 짧고 강렬했던 삶과 예술혼을 3D 프로젝션 맵핑 기술과 함께 그려냅니다.",
        "cast": {
            "빈센트 반 고흐": ["김경수", "박민성", "이준혁"],
            "테오 반 고흐": ["유승현", "박유덕", "황민수"]
        }
    },
    {
        "title": "번지점프를 하다",
        "background_css": "linear-gradient(135deg, #536976, #292e49)",
        "summary": "동명의 영화를 원작으로, 죽은 첫사랑을 잊지 못하는 남자 '인우'와 그의 앞에 나타난, 첫사랑의 흔적을 가진 학생 '현빈'의 시공간을 초월한 사랑 이야기입니다.",
        "cast": {
            "서인우": ["이지훈", "강필석", "김우형"],
            "인태희": ["김지현", "전미도", "최유하"],
            "임현빈": ["이재균", "윤소호", "려욱"]
        }
    },
    {
        "title": "여신님이 보고 계셔",
        "background_css": "linear-gradient(135deg, #56ab2f, #a8e063)",
        "summary": "한국전쟁 중, 무인도에 표류하게 된 남북한 병사들이 '여신님'이라는 가상의 존재를 만들어내며 서로를 위로하고 인간성을 회복하는 이야기입니다.",
        "cast": {
            "한영범": ["성두섭", "조성윤", "김신의"],
            "류순호": ["려욱", "정욱진", "박정원"],
            "이창섭": ["최대훈", "홍우진", "윤석원"]
        }
    },
    {
        "title": "인터뷰",
        "background_css": "linear-gradient(135deg, #3d4e61, #242424)",
        "summary": "10년 전 살인사건의 진범을 찾기 위해 작가 '유진 킴'이 보조작가 지망생 '싱클레어'를 인터뷰하면서 벌어지는 심리 스릴러 3인극입니다.",
        "cast": {
            "유진 킴": ["이건명", "민영기", "김수용"],
            "싱클레어": ["김재범", "정동화", "이용규"],
            "조안": ["김주연", "민경아", "최수진"]
        }
    },
    {
        "title": "김종욱 찾기",
        "background_css": "linear-gradient(135deg, #ff8c00, #ffc837)",
        "summary": "첫사랑 '김종욱'을 잊지 못하는 '그 여자'와, 첫사랑을 찾아주는 회사를 운영하는 '그 남자'의 유쾌하고 사랑스러운 로맨틱 코미디입니다.",
        "cast": {
            "그 남자": ["엄기준", "오만석", "김무열", "유연석"],
            "그 여자": ["오나라", "김지우", "린아"]
        }
    },
    {
        "title": "나와 나타샤와 흰 당나귀",
        "background_css": "linear-gradient(135deg, #e0eafc, #cfdef3)",
        "summary": "시인 '백석'과 그가 사랑했던 기생 '자야'의 애틋하고 아름다운 사랑 이야기를 백석의 시와 함께 서정적으로 풀어낸 뮤지컬입니다.",
        "cast": {
            "백석": ["강필석", "이상이", "오종혁", "이상이"],
            "자야": ["정인지", "최연우", "곽선영"]
        }
    },
    {
        "title": "미드나잇: 액터뮤지션",
        "background_css": "linear-gradient(135deg, #232526, #414345, #000000)",
        "summary": "매일 밤 12시, 비밀경찰이 찾아온다는 공포에 떠는 부부에게 의문의 '손님'이 찾아오면서 벌어지는 하룻밤의 심리 스릴러입니다. 배우들이 직접 악기를 연주합니다.",
        "cast": {
            "비지터": ["고훈정", "박은석", "김찬호"],
            "맨": ["정동화", "김지철", "이용규"],
            "우먼": ["김리", "김수연", "최연우"]
        }
    },
    {
        "title": "스모크",
        "background_css": "linear-gradient(135deg, #3e5151, #decba4)",
        "summary": "천재 시인 '이상'의 시를 모티브로, 그의 불안하고 고뇌에 찬 내면 세계를 '초', '해', '홍' 세 인물을 통해 몽환적으로 그려낸 작품입니다.",
        "cast": {
            "초": ["김재범", "박은석", "김종구"],
            "해": ["정연", "김소향", "윤소호"],
            "홍": ["이용규", "정동화", "박준휘"]
        }
    },
    {
        "title": "라스트 파이브 이어스",
        "background_css": "linear-gradient(135deg, #ff9a9e, #fad0c4)",
        "summary": "한 커플의 5년간의 사랑과 이별을 남자는 시간 순서대로, 여자는 시간 역순으로 풀어가는 독특한 구성의 2인극 뮤지컬입니다.",
        "cast": {
            "제이미": ["박강현", "최재림", "이충주"],
            "캐시": ["민경아", "박지연", "김수하"]
        }
    }
]

# --- 동적 배경 설정 함수 ---
def set_background(css_string):
    st.markdown(f"""
    <style>
    .stApp {{
        background-image: {css_string};
        background-attachment: fixed;
        background-size: cover;
        color: #e0e0e0;
    }}
    /* 나머지 스타일은 여기에 유지 */
    h1, h2, h3 {{ color: #ffffff; }}
    .stTextInput > div > div > input {{ background-color: rgba(255, 255, 255, 0.1); color: #ffffff; border-radius: 20px; }}
    .stExpander {{ background-color: rgba(255, 255, 255, 0.05); border-radius: 10px; }}
    .stExpander header {{ color: #e0e0e0 !important; }}
    hr {{ background-color: #444444; }}
    .stImage img {{ border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.3); margin-bottom: 1rem; }}
    </style>
    """, unsafe_allow_html=True)

# --- 앱 UI 구성 ---

# 제목과 부제
st.markdown("<h1 style='text-align: center;'>🎭 한국 뮤지컬 대백과</h1>", unsafe_allow_html=True)
st.markdown("<p style='text-align: center;'>한국 뮤지컬의 모든 것을 한눈에! 제목과 배우 이름으로 검색해보세요.</p>", unsafe_allow_html=True)


# 검색창
search_term = st.text_input("", placeholder="뮤지컬 제목 또는 배우 이름을 검색하세요...", label_visibility="collapsed")

# 검색 로직
filtered_musicals = []
if search_term:
    # 띄어쓰기를 제거하여 검색 정확도 향상
    search_term_no_space = search_term.replace(" ", "").lower()
    for musical in musicals_data:
        # 1. 뮤지컬 제목에 검색어가 포함되어 있는지 확인 (띄어쓰기 무시)
        title_no_space = musical['title'].replace(" ", "").lower()
        if search_term_no_space in title_no_space:
            filtered_musicals.append(musical)
            continue # 다음 뮤지컬로 넘어감

        # 2. 배우 이름에 검색어가 포함되어 있는지 확인 (띄어쓰기 무시)
        found_in_cast = False
        for role, actors in musical['cast'].items():
            for actor in actors:
                if search_term_no_space in actor.replace(" ", "").lower():
                    filtered_musicals.append(musical)
                    found_in_cast = True
                    break # 배우를 찾았으면 다음 역할로
            if found_in_cast:
                break # 역할을 찾았으면 다음 뮤지컬로
else:
    # 검색어가 없을 경우, 모든 뮤지컬을 보여줌
    filtered_musicals = musicals_data

# --- 배경 적용 로직 ---
# 기본 배경 설정
default_bg = "linear-gradient(135deg, #1a2a6c, #000000)"

if len(filtered_musicals) == 1:
    # 검색 결과가 하나일 경우, 해당 뮤지컬의 테마 배경 적용
    set_background(filtered_musicals[0]['background_css'])
else:
    # 검색 결과가 없거나 여러 개일 경우, 기본 배경 적용
    set_background(default_bg)


# 결과 출력
if not filtered_musicals:
    st.warning(f"'{search_term}'에 대한 검색 결과가 없습니다.")
else:
    if search_term:
        st.info(f"총 {len(filtered_musicals)}개의 뮤지컬을 찾았습니다.")
    
    st.divider() # 구분선

    for musical in filtered_musicals:
        st.markdown(f"<h2 style='text-align: center; color: #C0A062;'>{musical['title']}</h2>", unsafe_allow_html=True)
        st.markdown(f"<p style='text-align: center;'>{musical['summary']}</p>", unsafe_allow_html=True)

        # 출연진 정보는 확장 가능한 형태로 보여줌
        with st.expander("역대 주요 출연진 보기"):
            for role, actors in musical['cast'].items():
                # st.markdown을 사용하여 굵은 글씨와 함께 배우 목록을 깔끔하게 표시
                st.markdown(f"<p style='text-align: center;'><strong>{role}:</strong> {', '.join(actors)}</p>", unsafe_allow_html=True)
        
        st.divider() # 각 뮤지컬 정보 사이에 구분선 추가
